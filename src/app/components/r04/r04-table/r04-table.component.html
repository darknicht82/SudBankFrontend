<div class="r04-table-container">
  <h4>ðŸ“‹ Campos Oficiales R04 - Saldos de Operaciones</h4>
  <p class="table-description">Lista completa de los 50 campos de la estructura R04 segÃºn el manual de la Superintendencia de Bancos.</p>
  
  <table mat-table [dataSource]="dataSource" class="mat-elevation-z8 r04-fields-table">
    <ng-container matColumnDef="no">
      <th mat-header-cell *matHeaderCellDef> No. </th>
      <td mat-cell *matCellDef="let field"> {{field.no}} </td>
    </ng-container>
  
    <ng-container matColumnDef="campo">
      <th mat-header-cell *matHeaderCellDef> Campo </th>
      <td mat-cell *matCellDef="let field"> {{field.campo}} </td>
    </ng-container>
  
    <ng-container matColumnDef="tipoDeDato">
      <th mat-header-cell *matHeaderCellDef> Tipo de Dato </th>
      <td mat-cell *matCellDef="let field"> {{field.tipoDeDato}} </td>
    </ng-container>
  
    <ng-container matColumnDef="obligatoriedad">
      <th mat-header-cell *matHeaderCellDef> Oblig. </th>
      <td mat-cell *matCellDef="let field"> 
        <span class="obligatory-badge" [class.required]="field.obligatoriedad === 'X'">
          {{field.obligatoriedad}}
        </span>
      </td>
    </ng-container>
  
    <ng-container matColumnDef="tabla">
      <th mat-header-cell *matHeaderCellDef> Tabla </th>
      <td mat-cell *matCellDef="let field"> 
        <span *ngIf="field.tabla" class="table-reference">{{field.tabla}}</span>
        <span *ngIf="!field.tabla" class="no-table">-</span>
      </td>
    </ng-container>
  
    <ng-container matColumnDef="descripcion">
      <th mat-header-cell *matHeaderCellDef> DescripciÃ³n </th>
      <td mat-cell *matCellDef="let field"> {{field.descripcion}} </td>
    </ng-container>
  
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>
  
  <div class="table-footer">
    <p><strong>Total de campos:</strong> {{getTotalFields()}}</p>
    <p><strong>Campos obligatorios:</strong> {{getObligatoryFields()}}</p>
    <p><strong>Campos opcionales:</strong> {{getOptionalFields()}}</p>
  </div>
</div>