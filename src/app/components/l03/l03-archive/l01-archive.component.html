<div class="l01-archive-container">
  <div class="archive-header">
    <h2><i class="pi pi-folder-open"></i> Archivo L01</h2>
    <p>Archivo hist贸rico de registros L01 - Emisores, Custodios y Contrapartes</p>
  </div>

  <div class="archive-content">
    <!-- Loading State -->
    <div *ngIf="isLoading" class="loading-overlay">
      <div class="loading-spinner">
        <i class="pi pi-spinner pi-spin"></i>
        <p>Cargando archivo...</p>
      </div>
    </div>

    <!-- Error State -->
    <div *ngIf="error" class="error-message">
      <i class="pi pi-exclamation-triangle"></i>
      {{ error }}
    </div>

    <!-- Archivo de Registros -->
    <div *ngIf="!isLoading && !error" class="archive-data">
      <div class="archive-stats">
        <div class="stat-item">
          <div class="stat-label">Total de Registros</div>
          <div class="stat-value">{{ registros.length }}</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">Registros Nacionales</div>
          <div class="stat-value">{{ getRegistrosNacionales() }}</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">Registros Extranjeros</div>
          <div class="stat-value">{{ getRegistrosExtranjeros() }}</div>
        </div>
      </div>

      <!-- Lista de Registros -->
      <div class="archive-list">
        <div class="list-header">
          <h3>Registros en Archivo</h3>
        </div>
        
        <div class="records-container">
          <div *ngFor="let registro of registros" class="record-item">
            <div class="record-header">
              <div class="record-id">{{ registro.identificacion }}</div>
              <div class="record-type" [class]="registro.tipoIdentificacion === 'R' ? 'ruc-type' : 'extranjero-type'">
                {{ registro.tipoIdentificacion === 'R' ? 'RUC' : 'Extranjero' }}
              </div>
            </div>
            <div class="record-details">
              <div class="detail-item">
                <span class="label">Clasificaci贸n:</span>
                <span class="value">{{ registro.clasificacion }}</span>
              </div>
              <div class="detail-item">
                <span class="label">Tipo:</span>
                <span class="value">{{ registro.tipo }}</span>
              </div>
              <div class="detail-item" *ngIf="registro.fechaCreacion">
                <span class="label">Fecha Creaci贸n:</span>
                <span class="value">{{ registro.fechaCreacion | date:'dd/MM/yyyy' }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Botones de Acci贸n -->
    <div class="archive-actions">
      <button type="button" class="btn btn-secondary" (click)="onRefresh()" [disabled]="isLoading">
        <i class="pi pi-refresh" *ngIf="!isLoading"></i>
        <i class="pi pi-spinner pi-spin" *ngIf="isLoading"></i>
        {{ isLoading ? 'Cargando...' : 'Actualizar' }}
      </button>
      
      <button type="button" class="btn btn-primary" (click)="onExport()" [disabled]="isLoading || registros.length === 0">
        <i class="pi pi-download"></i>
        Exportar TXT
      </button>
    </div>
  </div>
</div>
