<div class="l05-main-container">
  <!-- CABECERA -->
  <div class="header">
    <h1>L05 - Fondos Disponibles Semanales</h1>
    <p class="subtitle">Registra el detalle de los saldos en las cuentas de fondos disponibles mantenidos en
      instituciones financieras.</p>
  </div>

  <!-- INFORMACI√ìN DE ESTRUCTURA -->
  <div class="structure-info">
    <div class="card">
      <div class="card-header">
        <h3>üìã Informaci√≥n de la Estructura L05</h3>
      </div>
      <div class="card-content">
        <p><strong>Descripci√≥n:</strong> Registra el detalle de los saldos en las cuentas de fondos disponibles
          mantenidos en instituciones financieras, contabilizados en la cuenta 1103 ‚ÄúFondos Disponibles ‚Äì Bancos y otras
          instituciones financieras‚Äù. Esta estructura debe reportarse obligatoriamente en forma semanal, con corte al
          d√≠a viernes.</p>
        <p><strong>Periodicidad:</strong> Semanal </p>
        <p><strong>Plazo entrega:</strong> Seg√∫n requerimientos de la SB</p>
        <p><strong>C√≥digo Banco:</strong> 1038</p>
        <p><strong>Formato archivo:</strong> L05Lxxxxddmmaaaa.txt</p>
        <p><strong>Fuente:</strong> Manual de Control de Inversiones - SB Marzo 2017</p>

        <div class="requirements">
          <strong>Validaciones:</strong>
          <ul>
            <li>Validaci√≥n de la semana anterior</li>
            <li>Validaci√≥n del balance</li>
            <li>Registros duplicados</li>
          </ul>
        </div>

        <strong>Campos Oficiales:</strong>
        <div style="height: 400px;width: 100%;overflow: auto;border: 1px solid #ccc;background: #fff;">
          <app-l05-table></app-l05-table>
        </div>
      </div>
    </div>
  </div>

  <!-- RESUMEN -->
  <div class="summary-section">
    <div class="card">
      <div class="card-header">
        <h3>üìä Resumen del Reporte</h3>
      </div>
      <div class="card-content">
        <div class="summary-grid">
          <div class="summary-item">
            <label>Total Registros:</label>
            <span>{{ 20 }}</span>
          </div>
          <div class="summary-item">
            <label>Fecha Generaci√≥n:</label>
            <span> 2055/08/20 </span>
          </div>
          <div class="summary-item">
            <label>Emisores:</label>
            <span>{{ 20 }}</span>
          </div>
          <div class="summary-item">
            <label>Custodios:</label>
            <span>{{ 20 }}</span>
          </div>
          <div class="summary-item">
            <label>Depositarios:</label>
            <span>{{ 20 }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="data-section">
    <div class="table-container">
      <table class="data-table">
        <thead>
          <tr>
            <th>
              Tipo de Identificaci√≥n
            </th>
            <th>
              Depositario
            </th>
            <th>
              Tipo de dep√≥sito
            </th>
            <th>
              N√∫mero de identificaci√≥n de dep√≥sito
            </th>
            <th>
              Cuenta contable
            </th>
            <th>
              Moneda
            </th>
            <th>
              Valor
            </th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of arrayResume">
            <td class="data-cell">
              <span class="cell-value">{{ item.tipoIdentificacion?.descripcion }}</span>
            </td>
            <td class="data-cell">
              <span class="cell-value">{{ item.depositario?.descripcion }}</span>
            </td>
            <td class="data-cell">
              <span class="cell-value">{{ item.tipoDeposito?.descripcion }}</span>
            </td>
            <td class="data-cell">
              <span class="cell-value">{{ item.numeroIdentificacionDeposito }}</span>
            </td>
            <td class="data-cell">
              <span class="cell-value">{{ item.cuentaContable }}</span>
            </td>
            <td class="data-cell">
              <span class="cell-value">{{ item.moneda?.descripcion }}</span>
            </td>
            <td class="data-cell">
              <span class="cell-value">{{ item.valorMonedaDenominacion }}</span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="d-flex gap-2">
    <button (click)="validateAndGenerateReport()" [disabled]="loading" class="btn btn-primary">
      <i class="pi pi-check-circle"></i>
      {{ loading ? 'Validando...' : 'Validar y Generar Reporte L05' }}
    </button>

    <button (click)="exportToTxt()" class="btn btn-success">
      <i class="pi pi-download"></i>
      Exportar TXT
    </button>

    <button (click)="openModal()" class="btn btn-info">
      <i class="pi pi-plus"></i>
      Crear Nuevo Registro
    </button>
  </div>

  <app-l05-modal-form [isVisible]="showModalForm" (modalClosed)="onModalClosed()"></app-l05-modal-form>

  <div *ngIf="loading" class="loading-overlay">
    <div class="loading-spinner">
      <div class="spinner"></div>
      <p>Generando reporte L05...</p>
    </div>
  </div>
</div>