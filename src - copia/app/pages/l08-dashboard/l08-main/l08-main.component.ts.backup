import { Component, OnInit } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';

@Component({
  selector: 'app-l08-main',
  standalone: true,
  imports: [CommonModule, FormsModule],
  templateUrl: './l08-main.component.html',
  styleUrls: ['./l08-main.component.scss']
})
export class L08MainComponent implements OnInit {
  
  datosSeleccionados: any[] = [];
  fechaInicio: string = '';
  fechaFin: string = '';
  cargando: boolean = false;

  constructor() {}

  ngOnInit(): void {
    this.inicializarFechas();
  }

  inicializarFechas(): void {
    const hoy = new Date();
    const hace30Dias = new Date();
    hace30Dias.setDate(hoy.getDate() - 30);
    
    this.fechaInicio = hace30Dias.toISOString().split('T')[0];
    this.fechaFin = hoy.toISOString().split('T')[0];
  }

  formatearNumero(valor: number): string {
    return valor.toLocaleString('es-ES', {
      minimumFractionDigits: 2,
      maximumFractionDigits: 2
    });
  }

  formatearPorcentaje(valor: number): string {
    return valor.toFixed(2) + '%';
  }

  cargarDatos(): void {
    this.cargando = true;
    // Aquí se implementará la llamada al backend
    setTimeout(() => {
      this.cargando = false;
    }, 2000);
  }

  exportarDatos(): void {
    // Implementar exportación
    console.log('Exportando datos...');
  }

  generarReporte(): void {
    // Implementar generación de reporte
    console.log('Generando reporte...');
  }
} 